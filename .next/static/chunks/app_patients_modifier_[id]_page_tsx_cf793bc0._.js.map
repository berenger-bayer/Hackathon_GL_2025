{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/HP/Documents/Github/Hackathon_GL_2025/app/patients/modifier/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter, useParams } from \"next/navigation\";\r\nimport { FaSave, FaTimes, FaUser, FaNotesMedical, FaWeight, FaRulerVertical, FaIdCard, FaUserMd,FaCheckCircle } from \"react-icons/fa\";\r\nimport { toast, Toaster } from \"react-hot-toast\";\r\n\r\nexport default function EditPatientPage() {\r\n  const router = useRouter();\r\n  const { id } = useParams();\r\n  const [patient, setPatient] = useState({\r\n    name: \"\",\r\n    age: \"\",\r\n    sexe: \"\",\r\n    diagnosis: \"\",\r\n    poids: \"\",\r\n    taille: \"\",\r\n    traitement: \"\",\r\n    numSecu: \"\",\r\n    medecin: \"\",\r\n    allergies: \"\",\r\n    groupeSanguin: \"\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    const fetchPatient = async () => {\r\n      try {\r\n        const res = await fetch(`/api/patients/${id}`);\r\n        if (!res.ok) throw new Error(\"Erreur lors de la récupération des données\");\r\n        \r\n        const data = await res.json();\r\n        setPatient({\r\n          name: data.name || \"\",\r\n          age: data.age || \"\",\r\n          sexe: data.sexe || \"\",\r\n          diagnosis: data.diagnosis || \"\",\r\n          poids: data.poids ?? \"\",\r\n          taille: data.taille ?? \"\",\r\n          traitement: data.traitement ?? \"\",\r\n          numSecu: data.numSecu ?? \"\",\r\n          medecin: data.medecin ?? \"\",\r\n          allergies: data.allergies ?? \"\",\r\n          groupeSanguin: data.groupeSanguin ?? \"\",\r\n        });\r\n      } catch (err) {\r\n        console.error(\"Erreur chargement patient:\", err);\r\n        alert(err.message);\r\n        router.push(`/patients/${id}`);\r\n      }\r\n    };\r\n\r\n    fetchPatient();\r\n  }, [id]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setPatient({ ...patient, [name]: value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    try {\r\n      const res = await fetch(`/api/patients/${id}`, {\r\n        method: \"PUT\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          ...patient,\r\n          age: parseInt(patient.age),\r\n          poids: patient.poids ? parseFloat(patient.poids) : null,\r\n          taille: patient.taille ? parseFloat(patient.taille) : null\r\n        }),\r\n      });\r\n\r\n      if (!res.ok) throw new Error(\"Échec de la mise à jour\");\r\n      \r\n      toast.success(\"Modifications enregistrées avec succès!\", {\r\n        duration: 4000,\r\n        position: \"top-center\",\r\n        // eslint-disable-next-line react/jsx-no-undef\r\n        icon: <FaCheckCircle className=\"text-green-500\" />,\r\n      });\r\n      \r\n      router.push(`/patients/?updated=true`);\r\n    } catch (err) {\r\n      console.error(\"Erreur mise à jour:\", err);\r\n      alert(err.message);\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    router.push('/patients');\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 p-4 md:p-8 text-black\">\r\n      <div className=\"max-w-6xl mx-auto bg-white rounded-xl shadow-md overflow-hidden\">\r\n        {/* Header */}\r\n        <div className=\"bg-blue-700 p-6 text-white\">\r\n          <h1 className=\"text-2xl font-bold\">Modification du dossier patient</h1>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-8\">\r\n          {/* Section 1: Informations personnelles */}\r\n          <div className=\"border rounded-lg overflow-hidden\">\r\n            <div className=\"bg-blue-50 p-4 border-b flex items-center\">\r\n              <FaUser className=\"text-blue-700 mr-2\" />\r\n              <h2 className=\"text-xl font-semibold text-blue-800\">Informations personnelles</h2>\r\n            </div>\r\n            <div className=\"p-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Nom complet*</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"name\"\r\n                  value={patient.name}\r\n                  onChange={handleChange}\r\n                  required\r\n                  className=\"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Âge*</label>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"age\"\r\n                  value={patient.age}\r\n                  onChange={handleChange}\r\n                  required\r\n                  min=\"0\"\r\n                  className=\"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Sexe</label>\r\n                <select\r\n                  name=\"sexe\"\r\n                  value={patient.sexe}\r\n                  onChange={handleChange}\r\n                  className=\"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                >\r\n                  <option value=\"\">Sélectionner</option>\r\n                  <option value=\"Masculin\">Masculin</option>\r\n                  <option value=\"Féminin\">Féminin</option>\r\n                  <option value=\"Autre\">Autre</option>\r\n                </select>\r\n              </div>\r\n\r\n              \r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">N° Sécurité Sociale</label>\r\n                <div className=\"relative\">\r\n                  <FaIdCard className=\"absolute left-3 top-3 text-gray-400\" />\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"numSecu\"\r\n                    value={patient.numSecu}\r\n                    onChange={handleChange}\r\n                    className=\"w-full pl-10 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Groupe sanguin</label>\r\n                <select\r\n                  name=\"groupeSanguin\"\r\n                  value={patient.groupeSanguin}\r\n                  onChange={handleChange}\r\n                  className=\"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                >\r\n                  <option value=\"\">Inconnu</option>\r\n                  <option value=\"A+\">A+</option>\r\n                  <option value=\"A-\">A-</option>\r\n                  <option value=\"B+\">B+</option>\r\n                  <option value=\"B-\">B-</option>\r\n                  <option value=\"AB+\">AB+</option>\r\n                  <option value=\"AB-\">AB-</option>\r\n                  <option value=\"O+\">O+</option>\r\n                  <option value=\"O-\">O-</option>\r\n                </select>\r\n              </div>\r\n\r\n              \r\n            </div>\r\n          </div>\r\n\r\n          {/* Section 2: Informations médicales */}\r\n          <div className=\"border rounded-lg overflow-hidden\">\r\n            <div className=\"bg-blue-50 p-4 border-b flex items-center\">\r\n              <FaNotesMedical className=\"text-blue-700 mr-2\" />\r\n              <h2 className=\"text-xl font-semibold text-blue-800\">Informations médicales</h2>\r\n            </div>\r\n            <div className=\"p-6 grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Taille (m)</label>\r\n                <div className=\"relative\">\r\n                  <FaRulerVertical className=\"absolute left-3 top-3 text-gray-400\" />\r\n                  <input\r\n                    type=\"number\"\r\n                    name=\"taille\"\r\n                    value={patient.taille}\r\n                    onChange={handleChange}\r\n                    step=\"0.01\"\r\n                    min=\"0\"\r\n                    className=\"w-full pl-10 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Poids (kg)</label>\r\n                <div className=\"relative\">\r\n                  <FaWeight className=\"absolute left-3 top-3 text-gray-400\" />\r\n                  <input\r\n                    type=\"number\"\r\n                    name=\"poids\"\r\n                    value={patient.poids}\r\n                    onChange={handleChange}\r\n                    step=\"0.1\"\r\n                    min=\"0\"\r\n                    className=\"w-full pl-10 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Médecin traitant</label>\r\n                <div className=\"relative\">\r\n                  <FaUserMd className=\"absolute left-3 top-3 text-gray-400\" />\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"medecin\"\r\n                    value={patient.medecin}\r\n                    onChange={handleChange}\r\n                    className=\"w-full pl-10 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              \r\n\r\n              <div className=\"md:col-span-2\">\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Allergies connues</label>\r\n                <textarea\r\n                  name=\"allergies\"\r\n                  value={patient.allergies}\r\n                  onChange={handleChange}\r\n                  rows={3}\r\n                  className=\"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"md:col-span-2\">\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Diagnostic principal*</label>\r\n                <textarea\r\n                  name=\"diagnosis\"\r\n                  value={patient.diagnosis}\r\n                  onChange={handleChange}\r\n                  required\r\n                  rows={3}\r\n                  className=\"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"md:col-span-2\">\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Traitement prescrit</label>\r\n                <textarea\r\n                  name=\"traitement\"\r\n                  value={patient.traitement}\r\n                  onChange={handleChange}\r\n                  rows={4}\r\n                  className=\"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Actions */}\r\n          <div className=\"flex justify-end space-x-4 pt-4\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleCancel}\r\n              className=\"px-6 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition flex items-center\"\r\n            >\r\n              <FaTimes className=\"mr-2\" />\r\n              Annuler\r\n            </button>\r\n            \r\n            <button\r\n              type=\"submit\"\r\n              className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition flex items-center\"\r\n            >\r\n              <FaSave className=\"mr-2\" />\r\n              Enregistrer les modifications\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}