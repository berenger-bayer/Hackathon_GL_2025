(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[52],{11425:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>o});var t=l(95155),a=l(12115),i=l(35695),r=l(60760),n=l(92673),d=l(29911);function o(){let[e,s]=(0,a.useState)({name:"",age:"",sexe:"",diagnosis:"",poids:"",taille:"",traitement:"",numSecu:"",medecin:"",rendezvous:"",groupeSanguin:"",allergies:"",notes:""}),[l,o]=(0,a.useState)({}),[m,c]=(0,a.useState)(!1),[u,x]=(0,a.useState)(!1),g=(0,i.useRouter)(),h=()=>{let s={};return e.name.trim()?e.name.trim().length<2&&(s.name="Le nom doit contenir au moins 2 caract\xe8res"):s.name="Le nom est requis",e.age?isNaN(Number(e.age))?s.age="L'\xe2ge doit \xeatre un nombre":(0>Number(e.age)||Number(e.age)>120)&&(s.age="L'\xe2ge doit \xeatre entre 0 et 120 ans"):s.age="L'\xe2ge est requis",e.diagnosis.trim()||(s.diagnosis="Le diagnostic est requis"),e.poids&&isNaN(Number(e.poids))&&(s.poids="Le poids doit \xeatre un nombre"),e.taille&&isNaN(Number(e.taille))&&(s.taille="La taille doit \xeatre un nombre"),o(s),0===Object.keys(s).length},b=async s=>{if(s.preventDefault(),h()){c(!0);try{let s=await fetch("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.name.trim(),age:Number(e.age),sexe:e.sexe||null,diagnosis:e.diagnosis.trim(),poids:e.poids?Number(e.poids):null,taille:e.taille?Number(e.taille):null,traitement:e.traitement||null,numSecu:e.numSecu||null,medecin:e.medecin||null,rendezvous:e.rendezvous||null,groupeSanguin:e.groupeSanguin||null,allergies:e.allergies||null,notes:e.notes||null})});if(!s.ok){let e=await s.json();throw Error(e.error||"Erreur lors de l'ajout")}x(!0),setTimeout(()=>g.push("/patients"),2e3)}catch(e){o({submit:e instanceof Error?e.message:"Erreur inconnue"})}finally{c(!1)}}},p=e=>{let{id:t,value:a}=e.target;s(e=>({...e,[t]:a})),l[t]&&o(e=>({...e,[t]:void 0}))},j=e.poids&&e.taille?(Number(e.poids)/Math.pow(Number(e.taille),2)).toFixed(1):null;return(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 py-10 px-4 text-black",children:[(0,t.jsxs)(r.N,{children:[u&&(0,t.jsx)(n.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"fixed top-6 left-1/2 transform -translate-x-1/2 z-50",children:(0,t.jsxs)("div",{className:"bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-2",children:[(0,t.jsx)(d.A7C,{}),(0,t.jsx)("span",{children:"Patient ajout\xe9 avec succ\xe8s!"})]})}),l.submit&&(0,t.jsx)(n.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"fixed top-6 left-1/2 transform -translate-x-1/2 z-50",children:(0,t.jsxs)("div",{className:"bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-2",children:[(0,t.jsx)(d.BS8,{}),(0,t.jsx)("span",{children:l.submit})]})})]}),(0,t.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,t.jsxs)("button",{onClick:()=>g.back(),className:"mb-6 flex items-center text-blue-600 hover:text-blue-800 transition",children:[(0,t.jsx)(d.QVr,{className:"mr-2"}),"Retour"]}),(0,t.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 text-white",children:(0,t.jsxs)("h1",{className:"text-2xl font-bold flex items-center gap-3",children:[(0,t.jsx)(d.NPy,{}),"Nouveau Patient"]})}),(0,t.jsxs)("form",{onSubmit:b,className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"bg-blue-50 p-5 rounded-lg",children:[(0,t.jsxs)("h2",{className:"font-semibold text-blue-700 flex items-center gap-2 mb-4",children:[(0,t.jsx)(d.x$1,{}),"Informations personnelles"]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Nom complet ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{id:"name",type:"text",value:e.name,onChange:p,className:"w-full p-3 border rounded-lg ".concat(l.name?"border-red-500":"border-gray-300")}),l.name&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:l.name})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"age",className:"block text-sm font-medium text-gray-700 mb-1",children:["\xc2ge ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{id:"age",type:"number",min:"0",max:"120",value:e.age,onChange:p,className:"w-full p-3 border rounded-lg ".concat(l.age?"border-red-500":"border-gray-300")}),l.age&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:l.age})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"sexe",className:"block text-sm font-medium text-gray-700 mb-1",children:"Sexe"}),(0,t.jsxs)("select",{id:"sexe",value:e.sexe,onChange:p,className:"w-full p-3 border border-gray-300 rounded-lg",children:[(0,t.jsx)("option",{value:"",children:"S\xe9lectionner..."}),(0,t.jsx)("option",{value:"M",children:"Masculin"}),(0,t.jsx)("option",{value:"F",children:"F\xe9minin"}),(0,t.jsx)("option",{value:"Autre",children:"Autre"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"numSecu",className:"block text-sm font-medium text-gray-700 mb-1",children:"N\xb0 S\xe9curit\xe9 Sociale"}),(0,t.jsx)("input",{id:"numSecu",type:"text",value:e.numSecu,onChange:p,className:"w-full p-3 border border-gray-300 rounded-lg"})]})]})]}),(0,t.jsxs)("div",{className:"bg-blue-50 p-5 rounded-lg",children:[(0,t.jsxs)("h2",{className:"font-semibold text-blue-700 flex items-center gap-2 mb-4",children:[(0,t.jsx)(d.szJ,{}),"Sant\xe9"]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"groupeSanguin",className:"block text-sm font-medium text-gray-700 mb-1",children:"Groupe sanguin"}),(0,t.jsxs)("select",{id:"groupeSanguin",value:e.groupeSanguin,onChange:p,className:"w-full p-3 border border-gray-300 rounded-lg",children:[(0,t.jsx)("option",{value:"",children:"S\xe9lectionner..."}),(0,t.jsx)("option",{value:"A+",children:"A+"}),(0,t.jsx)("option",{value:"A-",children:"A-"}),(0,t.jsx)("option",{value:"B+",children:"B+"}),(0,t.jsx)("option",{value:"B-",children:"B-"}),(0,t.jsx)("option",{value:"AB+",children:"AB+"}),(0,t.jsx)("option",{value:"AB-",children:"AB-"}),(0,t.jsx)("option",{value:"O+",children:"O+"}),(0,t.jsx)("option",{value:"O-",children:"O-"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"allergies",className:"block text-sm font-medium text-gray-700 mb-1",children:"Allergies"}),(0,t.jsx)("input",{id:"allergies",type:"text",value:e.allergies,onChange:p,className:"w-full p-3 border border-gray-300 rounded-lg"})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"bg-indigo-50 p-5 rounded-lg",children:[(0,t.jsxs)("h2",{className:"font-semibold text-indigo-700 flex items-center gap-2 mb-4",children:[(0,t.jsx)(d.Ax7,{}),"Informations m\xe9dicales"]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"diagnosis",className:"block text-sm font-medium text-gray-700 mb-1",children:["Diagnostic ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{id:"diagnosis",type:"text",value:e.diagnosis,onChange:p,className:"w-full p-3 border rounded-lg ".concat(l.diagnosis?"border-red-500":"border-gray-300")}),l.diagnosis&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:l.diagnosis})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"traitement",className:"block text-sm font-medium text-gray-700 mb-1",children:"Traitement"}),(0,t.jsx)("textarea",{id:"traitement",rows:3,value:e.traitement,onChange:p,className:"w-full p-3 border border-gray-300 rounded-lg"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"medecin",className:"block text-sm font-medium text-gray-700 mb-1",children:"M\xe9decin traitant"}),(0,t.jsx)("input",{id:"medecin",type:"text",value:e.medecin,onChange:p,className:"w-full p-3 border border-gray-300 rounded-lg"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"rendezvous",className:"block text-sm font-medium text-gray-700 mb-1",children:"Rendez-vous"}),(0,t.jsx)("input",{id:"rendezvous",type:"datetime-local",value:e.rendezvous,onChange:p,className:"w-full p-3 border border-gray-300 rounded-lg"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),(0,t.jsx)("textarea",{id:"notes",rows:3,value:e.notes,onChange:p,className:"w-full p-3 border border-gray-300 rounded-lg"})]})]})]}),(0,t.jsxs)("div",{className:"bg-indigo-50 p-5 rounded-lg",children:[(0,t.jsxs)("h2",{className:"font-semibold text-indigo-700 flex items-center gap-2 mb-4",children:[(0,t.jsx)(d.egb,{}),"Mesures"]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"poids",className:"block text-sm font-medium text-gray-700 mb-1",children:"Poids (kg)"}),(0,t.jsx)("input",{id:"poids",type:"number",step:"0.1",value:e.poids,onChange:p,className:"w-full p-3 border rounded-lg ".concat(l.poids?"border-red-500":"border-gray-300")}),l.poids&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:l.poids})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"taille",className:"block text-sm font-medium text-gray-700 mb-1",children:"Taille (m)"}),(0,t.jsx)("input",{id:"taille",type:"number",step:"0.01",value:e.taille,onChange:p,className:"w-full p-3 border rounded-lg ".concat(l.taille?"border-red-500":"border-gray-300")}),l.taille&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:l.taille})]})]}),j&&(0,t.jsxs)("div",{className:"mt-4 p-3 bg-white rounded-lg border border-indigo-100",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"IMC calcul\xe9"}),(0,t.jsxs)("p",{className:"text-xl font-bold",children:[j," kg/m\xb2"]})]})]}),(0,t.jsx)("button",{type:"submit",disabled:m,className:"w-full py-3 px-6 rounded-lg text-white font-medium mt-4 transition ".concat(m?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700"),children:m?"Enregistrement...":"Enregistrer le patient"})]})]})]})]})]})}},35264:(e,s,l)=>{Promise.resolve().then(l.bind(l,11425))}},e=>{var s=s=>e(e.s=s);e.O(0,[711,47,433,441,684,358],()=>s(35264)),_N_E=e.O()}]);