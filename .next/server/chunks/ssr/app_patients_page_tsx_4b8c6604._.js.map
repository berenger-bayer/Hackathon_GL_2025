{
  "version": 3,
  "sources": [],
  "sections": [
<<<<<<< HEAD
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/macuser/Documents/GitHub/Hackathon_GL_2025/app/patients/page.tsx"],"sourcesContent":["\"use client\";  // Ajoutez cette ligne en haut du fichier\n\nimport { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { motion } from \"framer-motion\";\nimport { FaPlus, FaEdit, FaTrash, FaPrint, FaEye } from \"react-icons/fa\";\n\nexport default function PatientsPage() {\n  const [patients, setPatients] = useState([]);\n  const [search, setSearch] = useState(\"\");\n  const [filterKey, setFilterKey] = useState(\"name\");\n  const [sortAsc, setSortAsc] = useState(true);\n  const [notification, setNotification] = useState(\"\");\n  const router = useRouter();\n\n  useEffect(() => {\n    const isLoggedIn = localStorage.getItem(\"isLoggedIn\");\n    if (!isLoggedIn) {\n      router.push(\"/login\");\n    }\n  }, []);\n\n  useEffect(() => {\n    fetch(\"/api/patients\")\n      .then(async (res) => {\n        if (!res.ok) throw new Error(`Erreur API: ${res.status}`);\n        const data = await res.json();\n        setPatients(data);\n\n        const alertes = data.filter(p => p.diagnosis?.toLowerCase().includes(\"critique\"));\n        const maintenant = new Date();\n        const dansTroisJours = new Date();\n        dansTroisJours.setDate(maintenant.getDate() + 3);\n        const rappels = data.filter(p => {\n          const rdv = new Date(p.rendezvous);\n          return rdv >= maintenant && rdv <= dansTroisJours;\n        });\n\n        if (alertes.length > 0) {\n          setNotification(`âš ï¸ ${alertes.length} patient(s) en Ã©tat critique`);\n        } else if (rappels.length > 0) {\n          setNotification(`ðŸ”” ${rappels.length} rendez-vous Ã  venir dans 3 jours`);\n        }\n      })\n      .catch((err) => {\n        console.error(\"Erreur chargement patients:\", err);\n        setPatients([]);\n      });\n  }, []);\n\n  const filteredPatients = [...patients]\n    .filter((patient) => {\n      const value = patient[filterKey];\n      if (filterKey === \"id\") {\n        return String(value).includes(search);\n      }\n      return String(value).toLowerCase().includes(search.toLowerCase());\n    })\n    .sort((a, b) => {\n      if (a[filterKey] < b[filterKey]) return sortAsc ? -1 : 1;\n      if (a[filterKey] > b[filterKey]) return sortAsc ? 1 : -1;\n      return 0;\n    });\n\n  const handleDelete = async (id: string) => {\n    const confirmDelete = confirm(\"ÃŠtes-vous sÃ»r de vouloir supprimer ce patient ?\");\n    if (confirmDelete) {\n      try {\n        const res = await fetch(`/api/patients/${id}`, {\n          method: \"DELETE\",\n        });\n        if (!res.ok) throw new Error(`Erreur suppression patient: ${res.status}`);\n        setPatients(patients.filter((p) => p.id !== id));\n      } catch (error) {\n        console.error(\"Erreur suppression patient:\", error);\n        alert(\"Une erreur est survenue lors de la suppression.\");\n      }\n    }\n  };\n\n  const highlightMatch = (text: string, search: string) => {\n    const regex = new RegExp(`(${search})`, \"gi\");\n    return text.replace(regex, `<mark class=\"bg-yellow-300\">$1</mark>`);\n  };\n\n  const getHighlighted = (key: string, value: any): JSX.Element | string => {\n    const text = String(value);\n    if (filterKey === key && search) {\n      return (\n        <span\n          dangerouslySetInnerHTML={{\n            __html: highlightMatch(text, search),\n          }}\n        />\n      );\n    }\n    return text;\n  };\n\n  return (\n    <div className=\"bg-gray-100 min-h-screen\">\n      <div className=\"container mx-auto p-6\">\n        <motion.h1\n          className=\"text-4xl font-semibold mb-6 text-center text-indigo-700\"\n          initial={{ opacity: 0, y: -50 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 1 }}\n        >\n          Liste des Patients\n        </motion.h1>\n\n        <div className=\"bg-white p-6 mb-6 rounded-lg shadow-md grid grid-cols-1 md:grid-cols-5 gap-4 no-print\">\n          <input\n            type=\"text\"\n            placeholder={`Rechercher par ${filterKey}...`}\n            value={search}\n            onChange={(e) => setSearch(e.target.value)}\n            className=\"w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-indigo-600 text-lg\"\n          />\n\n          <select\n            value={filterKey}\n            onChange={(e) => setFilterKey(e.target.value)}\n            className=\"w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-indigo-600 text-lg\"\n          >\n            <option value=\"id\">ID</option>\n            <option value=\"name\">Nom</option>\n            <option value=\"age\">Ã‚ge</option>\n            <option value=\"diagnosis\">Diagnostic</option>\n          </select>\n\n          <button\n            onClick={() => setSortAsc(!sortAsc)}\n            className=\"w-full bg-indigo-600 text-white py-3 rounded-md hover:bg-indigo-700 transition text-lg\"\n          >\n            {sortAsc ? \"â†‘ Croissant\" : \"â†“ DÃ©croissant\"}\n          </button>\n\n          <button\n            onClick={() => router.push(\"/patients/ajouter\")}\n            className=\"w-full bg-green-600 text-white py-3 rounded-md hover:bg-green-700 transition flex items-center justify-center space-x-2 text-lg\"\n          >\n            <FaPlus />\n            <span className=\"hidden md:inline\">Ajouter</span>\n          </button>\n\n          <button\n            onClick={() => window.print()}\n            className=\"w-full bg-gray-500 text-white py-3 rounded-md hover:bg-gray-600 transition flex items-center justify-center space-x-2 text-lg\"\n          >\n            <FaPrint />\n            <span className=\"hidden md:inline\">Imprimer</span>\n          </button>\n        </div>\n\n        <div className=\"grid gap-4 md:overflow-x-auto md:bg-white md:shadow-lg md:rounded-lg\">\n          <table className=\"hidden md:table w-full border-collapse border border-gray-300\">\n            <thead>\n              <tr className=\"bg-indigo-100\">\n                <th className=\"border p-4 text-left text-indigo-600\">Patient nÂ°</th>\n                <th className=\"border p-4 text-left text-indigo-600\">Nom</th>\n                <th className=\"border p-4 text-left text-indigo-600\">Ã‚ge</th>\n                <th className=\"border p-4 text-left text-indigo-600\">Diagnostic</th>\n                <th className=\"border p-4 text-left text-indigo-600 no-print\">Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              {filteredPatients.map((patient, index) => (\n                <tr key={patient.id} className=\"hover:bg-gray-100\">\n                  <td className=\"border p-4 text-black\">\n                    {getHighlighted(\"id\", index + 1)}\n                  </td>\n                  <td className=\"border p-4 text-black\">\n                    {getHighlighted(\"name\", patient.name)}\n                  </td>\n                  <td className=\"border p-4 text-black\">\n                    {getHighlighted(\"age\", patient.age)}\n                  </td>\n                  <td className=\"border p-4 text-black\">\n                    {getHighlighted(\"diagnosis\", patient.diagnosis)}\n                  </td>\n                  <td className=\"border p-4 flex space-x-2 justify-center text-indigo-600 no-print\">\n                    <button\n                      onClick={() => router.push(`/patients/dossier/${patient.id}`)}\n                      className=\"bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700 transition\"\n                    >\n                      <FaEye size={18} />\n                    </button>\n                    <button\n                      onClick={() => router.push(`/patients/modifier/${patient.id}`)}\n                      className=\"bg-yellow-500 text-white p-2 rounded-lg hover:bg-yellow-600 transition\"\n                    >\n                      <FaEdit size={18} />\n                    </button>\n                    <button\n                      onClick={() => handleDelete(patient.id)}\n                      className=\"bg-red-500 text-white p-2 rounded-lg hover:bg-red-600 transition\"\n                    >\n                      <FaTrash size={18} />\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n\n          <div className=\"md:hidden grid gap-4\">\n            {filteredPatients.map((patient, index) => (\n              <div key={patient.id} className=\"bg-white shadow rounded-lg p-4 text-sm\">\n                <div className=\"font-bold text-indigo-600 mb-2\">\n                  Patient nÂ°{getHighlighted(\"id\", index + 1)}\n                </div>\n                <p><strong>Nom :</strong> {getHighlighted(\"name\", patient.name)}</p>\n                <p><strong>Ã‚ge :</strong> {getHighlighted(\"age\", patient.age)}</p>\n                <p><strong>Diagnostic :</strong> {getHighlighted(\"diagnosis\", patient.diagnosis)}</p>\n                <div className=\"flex justify-end space-x-3 mt-4\">\n                  <button\n                    onClick={() => router.push(`/patients/dossier/${patient.id}`)}\n                    className=\"bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 transition\"\n                  >\n                    <FaEye />\n                  </button>\n                  <button\n                    onClick={() => router.push(`/patients/modifier/${patient.id}`)}\n                    className=\"bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600 transition\"\n                  >\n                    <FaEdit />\n                  </button>\n                  <button\n                    onClick={() => handleDelete(patient.id)}\n                    className=\"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 transition\"\n                  >\n                    <FaTrash />\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {notification && (\n          <Notification message={notification} onClose={() => setNotification(\"\")} />\n        )}\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
=======
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/HP/Documents/Github/Hackathon_GL_2025/app/patients/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { JSX } from \"react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { motion } from \"framer-motion\";\r\nimport { FaPlus, FaEdit, FaTrash, FaPrint } from \"react-icons/fa\";\r\n\r\ntype Patient = {\r\n  id: string;\r\n  name: string;\r\n  age: number;\r\n  diagnosis: string;\r\n};\r\n\r\nexport default function PatientsPage() {\r\n  const [patients, setPatients] = useState<Patient[]>([]);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [filterKey, setFilterKey] = useState<keyof Patient>(\"name\");\r\n  const [sortAsc, setSortAsc] = useState(true);\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    const isLoggedIn = localStorage.getItem(\"isLoggedIn\");\r\n    if (!isLoggedIn) {\r\n      router.push(\"/login\");\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetch(\"/api/patients\")\r\n      .then(async (res) => {\r\n        if (!res.ok) throw new Error(`Erreur API: ${res.status}`);\r\n        const data = await res.json();\r\n        setPatients(data);\r\n      })\r\n      .catch((err) => {\r\n        console.error(\"Erreur chargement patients:\", err);\r\n        setPatients([]);\r\n      });\r\n  }, []);\r\n\r\n  const filteredPatients = [...patients]\r\n    .filter((patient) => {\r\n      const val = String(patient[filterKey]).toLowerCase();\r\n      return val.includes(search.toLowerCase());\r\n    })\r\n    .sort((a, b) => {\r\n      if (a[filterKey] < b[filterKey]) return sortAsc ? -1 : 1;\r\n      if (a[filterKey] > b[filterKey]) return sortAsc ? 1 : -1;\r\n      return 0;\r\n    });\r\n\r\n  const handleDelete = async (id: string) => {\r\n    const confirmDelete = confirm(\"ÃŠtes-vous sÃ»r de vouloir supprimer ce patient ?\");\r\n    if (confirmDelete) {\r\n      try {\r\n        const res = await fetch(`/api/patients/${id}`, {\r\n          method: \"DELETE\",\r\n        });\r\n        if (!res.ok) throw new Error(`Erreur suppression patient: ${res.status}`);\r\n        setPatients(patients.filter((p) => p.id !== id));\r\n      } catch (error) {\r\n        console.error(\"Erreur suppression patient:\", error);\r\n        alert(\"Une erreur est survenue lors de la suppression.\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const highlightMatch = (text: string, search: string) => {\r\n    const regex = new RegExp(`(${search})`, \"gi\");\r\n    return text.replace(regex, `<mark class=\"bg-yellow-300\">$1</mark>`);\r\n  };\r\n\r\n  const getHighlighted = (key: keyof Patient, value: string | number): JSX.Element | string => {\r\n    const text = String(value);\r\n    if (filterKey === key && search) {\r\n      return (\r\n        <span\r\n          dangerouslySetInnerHTML={{\r\n            __html: highlightMatch(text, search),\r\n          }}\r\n        />\r\n      );\r\n    }\r\n    return text;\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-gray-100 min-h-screen\">\r\n      <div className=\"container mx-auto p-6\">\r\n        <motion.h1\r\n          className=\"text-4xl font-semibold mb-6 text-center text-indigo-700\"\r\n          initial={{ opacity: 0, y: -50 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 1 }}\r\n        >\r\n          Liste des Patients\r\n        </motion.h1>\r\n\r\n        {/* Recherche, filtre, ajouter, imprimer */}\r\n        <div className=\"bg-white p-6 mb-6 rounded-lg shadow-md grid grid-cols-1 md:grid-cols-5 gap-4 no-print\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder={`Rechercher par ${filterKey}...`}\r\n            value={search}\r\n            onChange={(e) => setSearch(e.target.value)}\r\n            className=\"w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-indigo-600 text-lg\"\r\n          />\r\n\r\n          <select\r\n            value={filterKey}\r\n            onChange={(e) => setFilterKey(e.target.value as keyof Patient)}\r\n            className=\"w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-indigo-600 text-lg\"\r\n          >\r\n            <option value=\"id\">ID</option>\r\n            <option value=\"name\">Nom</option>\r\n            <option value=\"age\">Ã‚ge</option>\r\n            <option value=\"diagnosis\">Diagnostic</option>\r\n          </select>\r\n\r\n          <button\r\n            onClick={() => setSortAsc(!sortAsc)}\r\n            className=\"w-full bg-indigo-600 text-white py-3 rounded-md hover:bg-indigo-700 transition text-lg\"\r\n          >\r\n            {sortAsc ? \"â†‘ Croissant\" : \"â†“ DÃ©croissant\"}\r\n          </button>\r\n\r\n          <button\r\n            onClick={() => router.push(\"/patients/ajouter\")}\r\n            className=\"w-full bg-green-600 text-white py-3 rounded-md hover:bg-green-700 transition flex items-center justify-center space-x-2 text-lg\"\r\n          >\r\n            <FaPlus />\r\n            <span className=\"hidden md:inline\">Ajouter</span>\r\n          </button>\r\n\r\n          <button\r\n            onClick={() => window.print()}\r\n            className=\"w-full bg-gray-500 text-white py-3 rounded-md hover:bg-gray-600 transition flex items-center justify-center space-x-2 text-lg\"\r\n          >\r\n            <FaPrint />\r\n            <span className=\"hidden md:inline\">Imprimer</span>\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"grid gap-4 md:overflow-x-auto md:bg-white md:shadow-lg md:rounded-lg\">\r\n          {/* Version bureau */}\r\n          <table className=\"hidden md:table w-full border-collapse border border-gray-300\">\r\n            <thead>\r\n              <tr className=\"bg-indigo-100\">\r\n                <th className=\"border p-4 text-left text-indigo-600\">ID</th>\r\n                <th className=\"border p-4 text-left text-indigo-600\">Nom</th>\r\n                <th className=\"border p-4 text-left text-indigo-600\">Ã‚ge</th>\r\n                <th className=\"border p-4 text-left text-indigo-600\">Diagnostic</th>\r\n                <th className=\"border p-4 text-left text-indigo-600 no-print\">Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {filteredPatients.map((patient) => (\r\n                <tr key={patient.id} className=\"hover:bg-gray-100\">\r\n                  <td className=\"border p-4 text-black\">\r\n                    {getHighlighted(\"id\", patient.id)}\r\n                  </td>\r\n                  <td className=\"border p-4 text-black\">\r\n                    {getHighlighted(\"name\", patient.name)}\r\n                  </td>\r\n                  <td className=\"border p-4 text-black\">\r\n                    {getHighlighted(\"age\", patient.age)}\r\n                  </td>\r\n                  <td className=\"border p-4 text-black\">\r\n                    {getHighlighted(\"diagnosis\", patient.diagnosis)}\r\n                  </td>\r\n                  <td className=\"border p-4 flex space-x-4 justify-center text-indigo-600 no-print\">\r\n                    <button\r\n                      onClick={() => router.push(`/patients/modifier/${patient.id}`)}\r\n                      className=\"bg-yellow-500 text-white p-2 rounded-lg hover:bg-yellow-600 transition\"\r\n                    >\r\n                      <FaEdit size={18} />\r\n                    </button>\r\n                    <button\r\n                      onClick={() => handleDelete(patient.id)}\r\n                      className=\"bg-red-500 text-white p-2 rounded-lg hover:bg-red-600 transition\"\r\n                    >\r\n                      <FaTrash size={18} />\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n\r\n          {/* Version mobile */}\r\n          <div className=\"md:hidden grid gap-4\">\r\n            {filteredPatients.map((patient) => (\r\n              <div key={patient.id} className=\"bg-white shadow rounded-lg p-4 text-sm\">\r\n                <div className=\"font-bold text-indigo-600 mb-2\">\r\n                  ID : {getHighlighted(\"id\", patient.id)}\r\n                </div>\r\n                <p>\r\n                  <strong>Nom :</strong>{\" \"}\r\n                  {getHighlighted(\"name\", patient.name)}\r\n                </p>\r\n                <p>\r\n                  <strong>Ã‚ge :</strong>{\" \"}\r\n                  {getHighlighted(\"age\", patient.age)}\r\n                </p>\r\n                <p>\r\n                  <strong>Diagnostic :</strong>{\" \"}\r\n                  {getHighlighted(\"diagnosis\", patient.diagnosis)}\r\n                </p>\r\n                <div className=\"flex justify-end space-x-3 mt-4\">\r\n                  <button\r\n                    onClick={() => router.push(`/patients/modifier/${patient.id}`)}\r\n                    className=\"bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600 transition\"\r\n                  >\r\n                    <FaEdit />\r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleDelete(patient.id)}\r\n                    className=\"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 transition\"\r\n                  >\r\n                    <FaTrash />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
>>>>>>> 636f86c2b30ec9a8ea7b1da8b401e892e6f00843
}