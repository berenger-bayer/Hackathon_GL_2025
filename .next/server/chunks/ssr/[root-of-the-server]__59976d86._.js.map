{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///Users/macuser/Documents/GitHub/Hackathon_GL_2025/app/patients/modifier/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useRouter, useParams } from \"next/navigation\";\nimport { FaSave, FaTimes, FaUser, FaNotesMedical, FaWeight, FaRulerVertical, FaIdCard, FaUserMd,FaCheckCircle } from \"react-icons/fa\";\nimport { toast, Toaster } from \"react-hot-toast\";\n\nexport default function EditPatientPage() {\n  const router = useRouter();\n  const { id } = useParams();\n  const [patient, setPatient] = useState({\n    name: \"\",\n    age: \"\",\n    sexe: \"\",\n    diagnosis: \"\",\n    poids: \"\",\n    taille: \"\",\n    traitement: \"\",\n    numSecu: \"\",\n    medecin: \"\",\n    allergies: \"\",\n    groupeSanguin: \"\",\n  });\n\n  useEffect(() => {\n    const fetchPatient = async () => {\n      try {\n        const res = await fetch(`/api/patients/${id}`);\n        if (!res.ok) throw new Error(\"Erreur lors de la récupération des données\");\n        \n        const data = await res.json();\n        setPatient({\n          name: data.name || \"\",\n          age: data.age || \"\",\n          sexe: data.sexe || \"\",\n          diagnosis: data.diagnosis || \"\",\n          poids: data.poids ?? \"\",\n          taille: data.taille ?? \"\",\n          traitement: data.traitement ?? \"\",\n          numSecu: data.numSecu ?? \"\",\n          medecin: data.medecin ?? \"\",\n          allergies: data.allergies ?? \"\",\n          groupeSanguin: data.groupeSanguin ?? \"\",\n        });\n      } catch (err) {\n        console.error(\"Erreur chargement patient:\", err);\n        alert(err.message);\n        router.push(`/patients/${id}`);\n      }\n    };\n\n    fetchPatient();\n  }, [id]);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setPatient({ ...patient, [name]: value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    try {\n      const res = await fetch(`/api/patients/${id}`, {\n        method: \"PUT\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          ...patient,\n          age: parseInt(patient.age),\n          poids: patient.poids ? parseFloat(patient.poids) : null,\n          taille: patient.taille ? parseFloat(patient.taille) : null\n        }),\n      });\n\n      if (!res.ok) throw new Error(\"Échec de la mise à jour\");\n      \n      toast.success(\"Modifications enregistrées avec succès!\", {\n        duration: 4000,\n        position: \"top-center\",\n        // eslint-disable-next-line react/jsx-no-undef\n        icon: <FaCheckCircle className=\"text-green-500\" />,\n      });\n      \n      router.push(`/patients/?updated=true`);\n    } catch (err) {\n      console.error(\"Erreur mise à jour:\", err);\n      alert(err.message);\n    }\n  };\n\n  const handleCancel = () => {\n    router.push('/patients');\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 p-4 md:p-8 text-black\">\n      <div className=\"max-w-6xl mx-auto bg-white rounded-xl shadow-md overflow-hidden\">\n        {/* Header */}\n        <div className=\"bg-blue-700 p-6 text-white\">\n          <h1 className=\"text-2xl font-bold\">Modification du dossier patient</h1>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-8\">\n          {/* Section 1: Informations personnelles */}\n          <div className=\"border rounded-lg overflow-hidden\">\n            <div className=\"bg-blue-50 p-4 border-b flex items-center\">\n              <FaUser className=\"text-blue-700 mr-2\" />\n              <h2 className=\"text-xl font-semibold text-blue-800\">Informations personnelles</h2>\n            </div>\n            <div className=\"p-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Nom complet*</label>\n                <input\n                  type=\"text\"\n                  name=\"name\"\n                  value={patient.name}\n                  onChange={handleChange}\n                  required\n                  className=\"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Âge*</label>\n                <input\n                  type=\"number\"\n                  name=\"age\"\n                  value={patient.age}\n                  onChange={handleChange}\n                  required\n                  min=\"0\"\n                  className=\"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Sexe</label>\n                <select\n                  name=\"sexe\"\n                  value={patient.sexe}\n                  onChange={handleChange}\n                  className=\"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                >\n                  <option value=\"\">Sélectionner</option>\n                  <option value=\"Masculin\">Masculin</option>\n                  <option value=\"Féminin\">Féminin</option>\n                  <option value=\"Autre\">Autre</option>\n                </select>\n              </div>\n\n              \n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">N° Sécurité Sociale</label>\n                <div className=\"relative\">\n                  <FaIdCard className=\"absolute left-3 top-3 text-gray-400\" />\n                  <input\n                    type=\"text\"\n                    name=\"numSecu\"\n                    value={patient.numSecu}\n                    onChange={handleChange}\n                    className=\"w-full pl-10 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  />\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Groupe sanguin</label>\n                <select\n                  name=\"groupeSanguin\"\n                  value={patient.groupeSanguin}\n                  onChange={handleChange}\n                  className=\"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                >\n                  <option value=\"\">Inconnu</option>\n                  <option value=\"A+\">A+</option>\n                  <option value=\"A-\">A-</option>\n                  <option value=\"B+\">B+</option>\n                  <option value=\"B-\">B-</option>\n                  <option value=\"AB+\">AB+</option>\n                  <option value=\"AB-\">AB-</option>\n                  <option value=\"O+\">O+</option>\n                  <option value=\"O-\">O-</option>\n                </select>\n              </div>\n\n              \n            </div>\n          </div>\n\n          {/* Section 2: Informations médicales */}\n          <div className=\"border rounded-lg overflow-hidden\">\n            <div className=\"bg-blue-50 p-4 border-b flex items-center\">\n              <FaNotesMedical className=\"text-blue-700 mr-2\" />\n              <h2 className=\"text-xl font-semibold text-blue-800\">Informations médicales</h2>\n            </div>\n            <div className=\"p-6 grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Taille (m)</label>\n                <div className=\"relative\">\n                  <FaRulerVertical className=\"absolute left-3 top-3 text-gray-400\" />\n                  <input\n                    type=\"number\"\n                    name=\"taille\"\n                    value={patient.taille}\n                    onChange={handleChange}\n                    step=\"0.01\"\n                    min=\"0\"\n                    className=\"w-full pl-10 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  />\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Poids (kg)</label>\n                <div className=\"relative\">\n                  <FaWeight className=\"absolute left-3 top-3 text-gray-400\" />\n                  <input\n                    type=\"number\"\n                    name=\"poids\"\n                    value={patient.poids}\n                    onChange={handleChange}\n                    step=\"0.1\"\n                    min=\"0\"\n                    className=\"w-full pl-10 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  />\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Médecin traitant</label>\n                <div className=\"relative\">\n                  <FaUserMd className=\"absolute left-3 top-3 text-gray-400\" />\n                  <input\n                    type=\"text\"\n                    name=\"medecin\"\n                    value={patient.medecin}\n                    onChange={handleChange}\n                    className=\"w-full pl-10 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  />\n                </div>\n              </div>\n\n              \n\n              <div className=\"md:col-span-2\">\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Allergies connues</label>\n                <textarea\n                  name=\"allergies\"\n                  value={patient.allergies}\n                  onChange={handleChange}\n                  rows={3}\n                  className=\"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                />\n              </div>\n\n              <div className=\"md:col-span-2\">\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Diagnostic principal*</label>\n                <textarea\n                  name=\"diagnosis\"\n                  value={patient.diagnosis}\n                  onChange={handleChange}\n                  required\n                  rows={3}\n                  className=\"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                />\n              </div>\n\n              <div className=\"md:col-span-2\">\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Traitement prescrit</label>\n                <textarea\n                  name=\"traitement\"\n                  value={patient.traitement}\n                  onChange={handleChange}\n                  rows={4}\n                  className=\"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                />\n              </div>\n            </div>\n          </div>\n\n          {/* Actions */}\n          <div className=\"flex justify-end space-x-4 pt-4\">\n            <button\n              type=\"button\"\n              onClick={handleCancel}\n              className=\"px-6 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition flex items-center\"\n            >\n              <FaTimes className=\"mr-2\" />\n              Annuler\n            </button>\n            \n            <button\n              type=\"submit\"\n              className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition flex items-center\"\n            >\n              <FaSave className=\"mr-2\" />\n              Enregistrer les modifications\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}